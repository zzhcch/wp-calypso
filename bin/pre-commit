#!/bin/sh

printf "\nBy contributing to this project, you license the materials you contribute under the GNU General Public License v2 (or later). All materials must have GPLv2 compatible licenses â€” see .github/CONTRIBUTING.md for details.\n\n"

./bin/run-lint-index $(git diff --cached --name-only client/ server/ test/)
linter_exit_code=$?

if [ ! 0 = "$linter_exit_code" ]
then
	echo "\n"
	echo "\033[41mCOMMIT ABORTED:\033[0m the linter reported some problems. If you are aware of them and it is OK, repeat the commit command with --no-verify to avoid this check. You may also want to execute the linter after the errors have been solved: ./bin/run-lint-index \$(git diff --cached --name-only client/ server/ test/)"
	echo "\n"
fi

exit $linter_exit_code
